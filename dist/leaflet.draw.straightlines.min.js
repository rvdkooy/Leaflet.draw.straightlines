!function(n){"use strict";function t(n){var t=null;return e.eachLayer(function(o){o instanceof n&&(t=o)}),t}function o(n,t){var o,a;o=n.x?n:e.latLngToLayerPoint(n),a=t.x?t:e.latLngToLayerPoint(t);var r=Math.abs(o.x-a.x),i=Math.abs(o.y-a.y);return i<r}var a,r,e,i,u=n.Draw.Polyline.prototype._onMouseMove;window.onkeydown=function(n){"function"==typeof i&&(a=i(n))},window.onkeyup=function(){a=!1},n.Draw.Polyline.prototype._onMouseMove=function(i){if(u.call(this,i),a&&!r){var l=t(n.Marker);if(l){var y=l.getLatLng(),f=e.latLngToLayerPoint(y);o(i.layerPoint,f)?i.layerPoint.y=f.y:i.layerPoint.x=f.x,this._updateGuide(i.layerPoint)}}},n.Map.prototype.initStraightLines=function(u){u=u||{},i=u.start||function(n){return n.ctrlKey},e=this,e.on("dragstart",function(){r=!0}),e.on("dragend",function(){r=!1}),e.on("mouseup",function(){setTimeout(function(){if(a&&!r){var e=t(n.Polyline);if(e){var i=e.getLatLngs();void 0!=i&&1===i.length&&Array.isArray(i[0])&&(i=i[0]);var u=i[i.length-1],l=i[i.length-2];o(u,l)?u.lat=l.lat:u.lng=l.lng,e.redraw();var y=t(n.Marker);y&&y.update()}}})})}}(window.L);